name: aws
runtime: nodejs20.x
httpApi:
  cors: true
custom:
  ordersTable: OrdersTable
iam:
  role:
    statements:
      - Effect: Allow
        Action:
          - dynamodb:Query
          - dynamodb:Scan
          - dynamodb:GetItem
          - dynamodb:PutItem
          - dynamodb:UpdateItem
          - dynamodb:DeleteItem
        Resource:
          - Fn::GetAtt: [ OrdersTable, Arn ]
  environment:
    ORDER_TABLE: ${self:custom.ordersTable}